pipeline
{
   agent any
    stages
	{
      stage ('git clone')
	  { 
		steps 
		{ 
	     git 'https://github.com/sandesh421/maven-project' 
        }
      } 
     stage ('install code')
	 {
      steps
		{
			withMaven(jdk: 'localjdk', maven: 'localmaven') {
			sh 'mvn install'}
		}	
    
	}
 
    stage ('deploy to tomcat'){
	steps {
            sshagent ('[tomcat1]') {
            sh 'scp -o StrictHostKeyChecking=no */target/*.war ec2-user@18.189.6.46:/var/lib/tomcat/webapps'
			}
  }
}	
}
}
